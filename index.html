<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
    <title>Pitch Changer</title>
    <link rel="stylesheet" href="/src/assets/main.css" />
    <link rel="icon" href="data:;base64,=" />

    <!-- This file should not be bundled -->
    <script src="coi-serviceworker.min.js" data-external></script>
    <script type="module" src="/src/main.ts"></script>
</head>

<body>
    <div id="content-container" style="visibility: hidden;">
        <h1>Pitch Changer</h1>
        <div id="big-buttons-row">
            <button id="record-btn" class="big-control-btn control-btn" title="Record"><span id="record-btn-emoji"
                    class="emoji">‚è∫</span></button>
            <button id="play-btn" class="big-control-btn control-btn" title="Play" disabled="true"><span
                    id="play-btn-emoji" class="emoji">‚ñ∂</span></button>
        </div>
        <div id="small-buttons-row">
            <button id="load-btn" class="small-control-btn control-btn" title="Load"><span
                    class="emoji">ü°Ö</span><br>Load</button>
            <button id="save-btn" class="small-control-btn control-btn" title="Save" disabled="true"><span
                    class="emoji">ü°á</span><br>Save</button>
        </div>
        <div id="mode-row">
            <div class="radio-option">
                <input type="radio" id="pitch-mode" name="processing-mode" value="pitch" checked>
                <label for="pitch-mode">Pitch shift</label>
            </div>
            <div class="radio-option">
                <input type="radio" id="time-mode" name="processing-mode" value="time">
                <label for="time-mode">Time stretch</label>
            </div>
        </div>
        <div id="slider-row">
            <div id="pitch-label"></div>
            <div id="slider-container">
                <input type="range" id="pitch-slider" list="pitch-slider-markers">
                <datalist id="pitch-slider-markers"></datalist>
                <div id="slider-labels">
                    <span id="min-pitch-scale"></span>
                    <span id="max-pitch-scale"></span>
                </div>
            </div>
        </div>
        <div id="message-row">
            <div id="source-label"></div>
            <div id="processing-indicator" class="processing-indicator">
                <span id="processing-spinner" class="spinner" style="display: none;"></span>
                <span id="processing-label"></span>
            </div>
        </div>
    </div>

    <input type="file" id="file-input" accept="audio/*" style="display: none">

    <!-- Save filename dialog, used on non-Chrome browsers as workaround for showSaveFilePicker -->
    <div id="save-dialog-overlay" class="dialog-overlay" style="display: none;">
        <div class="dialog">
            <label for="save-filename-input">Filename:</label>
            <input type="text" id="save-filename-input" value="scaled.mp3">
            <div class="dialog-buttons">
                <button id="save-dialog-cancel-btn" class="dialog-btn control-btn">Cancel</button>
                <button id="save-dialog-ok-btn" class="dialog-btn control-btn">OK</button>
            </div>
        </div>
    </div>
    <a id="save-dialog-link" style="display: none;"></a>
</body>

</html>
